pnbuildbot readme.
==================

About This Project
------------------
This repository holds the sample configuration for 'master' component of the pacnas buildbot.
It is basically a modified configuration of the original buildbot configuration
from buildbot.net with a few added things.

This buildbot configuration is cloned from the vectorlinux buildbot and adopted
to our own needs (e.g. using github instead of bitbucket). For the original
version see https://bitbucket.org/VLCore/vlbuildbot/overview.

Preparing a new master (this should not be necessary)
-----------------------------------------------------

# create directory /srv/buildbot
# cd into this directory
# sudo buildbot create-master master
# sudo chown root:tu master -R
# 

Preparing a new slave.
---------------------
# Install the slave portion of the buildbot with {{{ pacman -S buildbot-slave }}}
# Create the slave where you want it (recommended path is /srv/buildbot.  See buildbot-slave --help )
# Create directory slave in /srv/buildbot
# buildbot create-slave --umask=0022 slave localhost:9989 example-slave pass (note, that the hostname, the name of the 
  slave and the password should be adopted accordingly)
# copy files from the slave-dir (github) to the newly created slave
# chown root:tu staging sources
# chmod 775 staging sources
# ln -s preferred push command (e.g. collect_and_deploy_remote or collect_and_deploy_local (used on our server) to collect_and_deploy)

# Edit the files admin and host in the sub-directory info

# Contact the pacnas buildbot administrator (hint: dev@pacnas.org) to get your password so the slave can connect to the master.


Getting the bot to work
-----------------------
Since this repo only holds the configuration, we need to actually install and setup the bot, and then drop in our configuration.  The following links provide the guide to installing the master and slaves with the default setup.
 * http://buildbot.net/buildbot/docs/current/tutorial/
 * http://buildbot.net/buildbot/docs/current/manual/installation.html
Once the master is installed, you can delete (or rename) the directory named 'master' and use the one on this repo to replace it.  The global bot configuration file is master/master.cfg

Adding a new slave
------------------
To add a new slave to the master, you must create the slave, and then edit slaves.py on the master configuration to add the new slave to the allowed slaves list.

Adding a new application to the bot
-----------------------------------
The bot monitors the provided versioned repository in master.cfg and/or builders.py.  However, to add a new application to be tracked and built by the bot, the application name needs to be added to the file named 'manifest' in the master configuration directory.

See http://vlcore.vectorlinux.com/buildbot/docs


